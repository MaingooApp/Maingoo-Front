<!-- ==================== TOPBAR PRINCIPAL ==================== -->
<div class="w-full h-20 bg-transparent dark:bg-transparent flex justify-center items-center px-8 pt-4">
  <div class="w-full bg-white dark:bg-surface-900 rounded-[var(--content-border-radius)] shadow-[0_4px_20px_rgba(26,60,52,0.08)] flex items-center justify-between pl-10 pr-4 h-full">
    <!-- ========== SECCIÓN IZQUIERDA: Identidad ========== -->
    <a routerLink="/" class="flex items-center gap-5">
      <!-- Avatar con iniciales del usuario -->
      <div class="w-12 h-12 rounded-full bg-[#1A3C34] dark:bg-[#6B9E86] flex items-center justify-center shadow-[0_2px_8px_rgba(26,60,52,0.15)]">
        <span class="text-white dark:text-[#1A3C34] font-bold text-base">NU</span>
      </div>
      <span class="text-lg font-semibold text-[#1A3C34] dark:text-surface-0 whitespace-nowrap">NOMBRE USUARIO | NOMBRE DE NEGOCIO</span>
    </a>

    <!-- ========== SECCIÓN DERECHA: Cápsula Flotante ========== -->
    <div class="bg-[#F0F7F4] dark:bg-surface-700 rounded-2xl px-6 py-2 shadow-[0_4px_12px_rgba(26,60,52,0.05)] flex items-center gap-10">
      <!-- Botón para abrir/cerrar el sidebar del chat -->
      <button 
        type="button" 
        (click)="layoutService.onMenuToggle()"
        class="flex items-center justify-center hover:scale-105 transition-all duration-200"
        aria-label="Abrir chat"
        pTooltip="Chat Maingoo" 
        tooltipPosition="bottom"
        [showDelay]="250"
        tooltipStyleClass="text-[#1A3C34] text-[11px] font-medium tracking-wide px-2.5 py-1 rounded-md shadow-sm">
        <img src="assets/images/maingoo_logo.svg" alt="Chat Maingoo" class="w-6 h-6 object-contain" />
      </button>

      
      
      <!-- Notificaciones del sistema -->
      <button 
      type="button" 
      (click)="toggleNotifications()"
      class="relative text-[#1A3C34] dark:text-surface-0 hover:text-[#6B9E86] dark:hover:text-[#6B9E86] hover:scale-105 transition-all duration-200"
      aria-label="Notificaciones"
      pTooltip="Notificaciones" 
      tooltipPosition="bottom"
      [showDelay]="250"
      tooltipStyleClass="text-[#1A3C34] text-[11px] font-medium tracking-wide px-2.5 py-1 rounded-md shadow-sm"
      >
      <i class="pi pi-bell text-xl"></i>
      <!-- Indicador de notificaciones no leídas -->
      @if (hasUnreadNotifications) {
        <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
      }
    </button>
    
    <!-- Acceso al Perfil del usuario -->
    <button 
    type="button" 
    routerLink="/miperfil"
    class="text-[#1A3C34] dark:text-surface-0 hover:text-[#6B9E86] dark:hover:text-[#6B9E86] hover:scale-105 transition-all duration-200"
    aria-label="Mi perfil"
    pTooltip="Mi perfil" 
    tooltipPosition="bottom"
    [showDelay]="250"
    tooltipStyleClass="text-[#1A3C34] text-[11px] font-medium tracking-wide px-2.5 py-1 rounded-md shadow-sm"
    >
    <i class="pi pi-user text-xl"></i>
  </button>
  
  <!-- Configuración del sistema -->
  <button 
  type="button" 
  (click)="openSettings()"
  class="text-[#1A3C34] dark:text-surface-0 hover:text-[#6B9E86] dark:hover:text-[#6B9E86] hover:scale-105 transition-all duration-200"
  aria-label="Configuración"
  pTooltip="Configuración" 
  tooltipPosition="bottom"
  [showDelay]="250"
  tooltipStyleClass="text-[#1A3C34] text-[11px] font-medium tracking-wide px-2.5 py-1 rounded-md shadow-sm"
  >
  <i class="pi pi-cog text-xl"></i>
</button>

<!-- Botón para alternar entre tema oscuro/claro -->
<button 
  type="button" 
  (click)="toggleDarkMode()"
  class="text-[#1A3C34] dark:text-surface-0 hover:text-[#6B9E86] dark:hover:text-[#6B9E86] hover:scale-105 transition-all duration-200"
  aria-label="Cambiar tema"
  pTooltip="Cambiar tema" 
  tooltipPosition="bottom"
  [showDelay]="250"
  tooltipStyleClass="text-[#1A3C34] text-[11px] font-medium tracking-wide px-2.5 py-1 rounded-md shadow-sm"
>
  <i
    class="text-xl"
    [ngClass]="{ 
      'pi ': true, 
      'pi-moon': layoutService.isDarkTheme(), 
      'pi-sun': !layoutService.isDarkTheme() 
    }"></i>
</button>

<!-- Botón de Cerrar Sesión -->
<button 
type="button" 
        (click)="logout()"
        class="text-[#1A3C34] dark:text-surface-0 hover:text-[#6B9E86] dark:hover:text-[#6B9E86] hover:scale-105 transition-all duration-200"
        aria-label="Cerrar sesión"
        pTooltip="Cerrar sesión" 
        tooltipPosition="bottom"
        [showDelay]="250"
        tooltipStyleClass="text-[#1A3C34] text-[11px] font-medium tracking-wide px-2.5 py-1 rounded-md shadow-sm"
      >
        <i class="pi pi-sign-out text-xl"></i>
      </button>
    </div>
  </div>

  <!-- Componente de configuración visual (oculto) -->
  <div class="hidden">
    <app-configurator />
  </div>
</div>
<!-- ==================== FIN TOPBAR ==================== -->
