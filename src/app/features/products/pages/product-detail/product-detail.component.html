<div class="p-8 card rounded-xl shadow-md" *ngIf="!loading && producto">
  <div class="flex flex-wrap gap-2 mb-6">
    <button pButton label="Volver" icon="pi pi-arrow-left" (click)="volver()"></button>
  </div>

  <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
    <i class="pi pi-tag text-primary"></i>
    {{ producto.name }}
  </h2>

  <div class="grid gap-8 md:grid-cols-2">
    <div class="space-y-3">
      <h3 class="text-xl font-semibold flex items-center gap-2">
        <i class="pi pi-info-circle text-primary"></i>
        Información principal
      </h3>
      <p><strong>Descripción:</strong> {{ producto.description || 'Sin descripción' }}</p>
      <p><strong>EAN / Código:</strong> {{ producto.eanCode || 'No disponible' }}</p>
      <p><strong>Unidad de medida:</strong> {{ producto.unit }}</p>
      <p><strong>Stock:</strong> {{ producto.stock }}</p>
    </div>

    <div class="space-y-3">
      <h3 class="text-xl font-semibold flex items-center gap-2">
        <i class="pi pi-bookmark text-primary"></i>
        Clasificación
      </h3>
      <p><strong>Categoría:</strong> {{ producto.category.name || 'Sin categoría' }}</p>
      <p *ngIf="producto.category.description" class="text-gray-600">{{ producto.category.description }}</p>
    </div>
  </div>

  <div class="grid gap-8 md:grid-cols-2 mt-10">
    <div class="space-y-3">
      <h3 class="text-xl font-semibold flex items-center gap-2">
        <i class="pi pi-shield text-primary"></i>
        Alérgenos
      </h3>
      <ng-container *ngIf="producto.allergens && producto.allergens.length > 0; else sinAlergenos">
        <div *ngFor="let alergeno of producto.allergens" class="border rounded-lg p-3 bg-gray-50">
          <p class="font-semibold text-surface-900">
            {{ alergeno.name }} <span class="text-sm text-gray-500">({{ alergeno.code }})</span>
          </p>
          <p class="text-sm text-gray-600">{{ alergeno.description }}</p>
        </div>
      </ng-container>
      <ng-template #sinAlergenos>
        <p class="text-gray-500">Este producto no tiene alérgenos registrados.</p>
      </ng-template>
    </div>

    <div class="space-y-3">
      <h3 class="text-xl font-semibold flex items-center gap-2">
        <i class="pi pi-clock text-primary"></i>
        Auditoría
      </h3>
      <p><strong>Creado:</strong> {{ producto.createdAt | date: 'dd/MM/yyyy HH:mm' }}</p>
      <p><strong>Actualizado:</strong> {{ producto.updatedAt | date: 'dd/MM/yyyy HH:mm' }}</p>
    </div>
  </div>
</div>

<div class="p-8 max-w-4xl mx-auto bg-white rounded-xl shadow-md text-center" *ngIf="loading">
  <i class="pi pi-spin pi-spinner text-primary" style="font-size: 3rem"></i>
  <p class="mt-4 text-gray-600">Cargando producto...</p>
</div>
