<app-detail-card-shell [title]="shellTitle" (close)="onClose()">
  <div header-actions class="flex items-center gap-1">
    <ng-container *ngxPermissionsOnly="[P.FoodPreparationsWrite]">
      <button
        *ngIf="preparationsComponent?.selectedPreparation() && !preparationsComponent?.isEditMode()"
        pButton
        class="p-button-text p-button-rounded text-gray-500 hover:text-maingoo-sage"
        aria-label="Editar"
        (click)="preparationsComponent?.toggleEditMode()">
        <app-icon name="edit" size="md"></app-icon>
      </button>
    </ng-container>
    <ng-container *ngxPermissionsOnly="[P.FoodPreparationsDelete]">
      <button
        *ngIf="preparationsComponent?.selectedPreparation() && !preparationsComponent?.isEditMode()"
        pButton
        class="p-button-rounded p-button-text p-button-danger"
        aria-label="Eliminar"
        (click)="onDeletePreparation()">
        <app-icon name="delete" size="md"></app-icon>
      </button>
    </ng-container>
  </div>

  <!-- Content -->
  <div class="flex flex-col gap-4">
    <!-- Elaborations -->
    <app-preparations-content
      #preparationsComponent
      *ngIf="selectedCategory === 'elaborations'"
      type="elaboration"
      [availableProducts]="availableProducts">
    </app-preparations-content>

    <!-- Articles -->
    <app-preparations-content
      #preparationsComponent
      *ngIf="selectedCategory === 'articles'"
      type="article"
      [availableProducts]="availableProducts">
    </app-preparations-content>

    <!-- Mise en place (placeholder) -->
    <div
      *ngIf="selectedCategory === 'mise-en-place'"
      class="flex flex-col items-center justify-center py-12 text-center">
      <div class="w-16 h-16 rounded-full bg-purple-50 flex items-center justify-center text-purple-400 mb-4">
        <app-icon name="chef_hat" size="xl"></app-icon>
      </div>
      <h3 class="text-lg font-medium text-gray-900">Mise en place</h3>
      <p class="text-sm text-gray-500 max-w-xs mx-auto mt-1">
        Próximamente podrás organizar y distribuir las elaboraciones con tu equipo.
      </p>
    </div>
  </div>
</app-detail-card-shell>
